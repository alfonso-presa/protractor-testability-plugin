/*! protractor-testability-plugin - v1.2.0
 *  Release on: 2016-10-08
 *  Copyright (c) 2016 Alfonso Presa
 *  Licensed MIT */
!function(a,b){"function"==typeof define&&define.amd?define([],function(){return b()}):"object"==typeof exports?module.exports=b():b()}(this,function(){"use strict";var a=require("fs");return module.exports={name:"protractor-testability-plugin",onPageLoad:function(){var b=a.readFileSync(require.resolve("testability.js")).toString(),c=require("testability-browser-bindings"),d=require("./client/protractor-bindings");browser.executeScript("if(!window.testability) {"+b+"}"),browser.executeScript(c),browser.executeScript(d,JSON.stringify(this.config.customFrameworkTestability,function(a,b){return"function"==typeof b?"var temp="+b.toString()+";temp;":b}))},waitForPromise:function(){return browser.executeAsyncScript("return window.testability && window.testability.when.ready.apply(null,arguments)").then(function(a){if(a)throw"Error while waiting to sync with the page: "+JSON.stringify(a)})}}});