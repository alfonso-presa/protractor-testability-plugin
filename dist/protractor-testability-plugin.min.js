/*! protractor-testability-plugin - v1.2.0
 *  Release on: 2019-08-06
 *  Copyright (c) 2019 Alfonso Presa
 *  Licensed MIT */

!function(t,e){"function"==typeof define&&define.amd?define([],function(){return e()}):"object"==typeof module&&module.exports?module.exports=e():e()}(0,function(){"use strict";var r=require("fs");return module.exports={name:"protractor-testability-plugin",onPageLoad:function(){var t=r.readFileSync(require.resolve("testability.js")).toString(),e=require("testability-browser-bindings"),i=require("./client/protractor-bindings");browser.executeScript("if(!window.testability) {(function(){"+t+"}.bind(window))()}"),browser.executeScript(function(t){var e=document.getElementsByTagName("head")[0],i="("+t+")();",r=document.createElement("script");r.type="text/javascript",r.textContent=i,e.insertBefore(r,e.firstChild)},e.toString()),browser.executeScript(i,JSON.stringify(this.config.customFrameworkTestability,function(t,e){return"function"==typeof e?"var temp="+e.toString()+";temp;":e}))},waitForPromise:function(){return browser.executeAsyncScript(function(t){return window.testability?window.testability.when.ready(t):t("Error, testability is not loaded in the browser window :-(.")}).then(function(t){if(t)throw"Error while waiting to sync with the page: "+JSON.stringify(t)})}}});